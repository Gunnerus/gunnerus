{% extends 'reserver/base.html' %}
{% load bootstrap3 %}
{% block content %}


{# Display django.contrib.messages as Bootstrap alerts #}
{% bootstrap_messages %}

{# Display a form #}
<section class="container">
	<form action="/cruises/test/" method="post" class="form">
		{% csrf_token %}
		{% bootstrap_form form %}
		{% if cruiseday_form %}
		<div class="cruiseDaysContainer">
			{{ cruiseday_form.management_form }}
			{{ cruiseday_form.non_form_errors }}
			{% for form in cruiseday_form %}
				<div class="cruiseDayForm">
					<div class="panel-heading">Cruise day</div>
					<div class="panel-body">
						{% bootstrap_form form %}
					</div>
				</div>
			{% endfor %}
		</div>
		{% endif %}
		{% if participant_form %}
		<div class="cruiseParticipantsContainer">
			{{ participant_form.management_form }}
			{{ participant_form.non_form_errors }}
			{% for form in participant_form %}
				<div class="participantForm">
					<div class="panel-heading">Participant</div>
					<div class="panel-body">
						{% bootstrap_form form %}
					</div>
				</div>
			{% endfor %}
		</div>
		{% endif %}
		{% buttons %}
		<button type="submit" class="btn btn-primary">
			{% bootstrap_icon "star" %} Submit
		</button>
		{% endbuttons %}
	</form>
</section>
{% endblock %}
{% block scripts %}
<script type="text/javascript">
	var wrap = function(row){ 
		$(row).addClass("panel panel-default"); 
		$(row).find(".delete-row").addClass("btn btn-danger"); 
	};
	
	$(function() {
		$('.cruiseDayForm').formset({
			prefix: '{{ cruiseday_form.prefix }}',
			formCssClass: 'cruisedays',
			addCssClass: 'btn btn-success',
			addText: 'Add cruise day', 
			added: wrap
		});
		$('.participantForm').formset({
			prefix: '{{ participant_form.prefix }}',
			formCssClass: 'participants',
			addCssClass: 'btn btn-success', 
			addText: 'Add participant', 
			added: wrap
		});
		
		wrap('.cruiseDayForm'); 
		wrap('.participantForm'); 
	})
</script>
{% endblock %}
{# Read the documentation for more information #}